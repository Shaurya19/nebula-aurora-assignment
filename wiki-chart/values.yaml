# FastAPI Application Configuration
fastapi:
  image_name: your-registry/wiki:latest
  imagePullPolicy: IfNotPresent
  replicaCount: 1
  containerPort: 8000
  service:
    type: ClusterIP
    port: 8000
  resources:
    requests:
      cpu: "250m"
      memory: "256Mi"
    limits:
      cpu: "1"
      memory: "1Gi"

# PostgreSQL Configuration (using bitnami/postgresql chart)
postgresql:
  enabled: true
  image:
    repository: bitnami/postgresql
    tag: "16.2.0"
  auth:
    postgresPassword: wiki_postgres_password
    username: wiki_user
    password: wiki_password
    database: wiki_db
  primary:
    persistence:
      enabled: true
      size: 1Gi
    resources:
      requests:
        cpu: "250m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"
  service:
    type: ClusterIP
    port: 5432

# Database connection configuration (used by FastAPI)
# Note: PostgreSQL service name will be <release-name>-postgresql
database:
  host: ""  # Will be set to <release-name>-postgresql in template
  port: 5432
  user: wiki_user
  password: wiki_password
  database: wiki_db

# Prometheus Configuration
prometheus:
  enabled: true
  image:
    repository: prom/prometheus
    tag: v2.48.0
  service:
    type: ClusterIP
    port: 9090
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "200m"
      memory: "256Mi"
  storage:
    size: 1Gi

# Grafana Configuration
grafana:
  enabled: true
  image:
    repository: grafana/grafana
    tag: 10.2.0
  adminUser: admin
  adminPassword: admin
  service:
    type: ClusterIP
    port: 3000
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "200m"
      memory: "256Mi"
  dashboard:
    id: creation-dashboard-678
    path: /d/creation-dashboard-678/creation

# Ingress Configuration
ingress:
  enabled: true
  className: nginx
  annotations: {}
  hosts:
    - host: example.com
      paths:
        - path: /users
          pathType: Prefix
        - path: /posts
          pathType: Prefix
        - path: /grafana
          pathType: Prefix

